const x=document.querySelector(".js-search_input"),A=document.querySelector(".js-search_btn"),_=document.querySelector(".js-reset_btn"),b=document.querySelector(".js-delete_btn"),j=document.querySelector(".js-log_btn"),a=document.querySelector(".js-search_list"),d=document.querySelector(".js-fav_list");let o=[],c=[];function E(n){n.preventDefault();const e=x.value;fetch(`https://api.jikan.moe/v4/anime?q=${e}`).then(t=>t.json()).then(t=>{o=t.data,r(o,a),m()})}A.addEventListener("click",E);function r(n,e){e.innerHTML="";for(const t of n){const i=document.createElement("li");i.setAttribute("id",t.mal_id),i.setAttribute("class","js-li"),e.appendChild(i);const s=document.createElement("img");s.setAttribute("class","js-img");const f=document.createElement("h3"),v=document.createTextNode(t.title);f.appendChild(v);const p=document.createElement("p"),h=document.createTextNode(`Episodios: ${t.episodes}`);if(p.appendChild(h),i.append(s,f,p),t.images.webp.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?s.setAttribute("src","https://placehold.co/210x295/ffffff/666666/png"):s.setAttribute("src",t.images.webp.image_url),c.find(l=>l.mal_id===t.mal_id)){i.setAttribute("class","favorite");const l=document.createElement("button");l.setAttribute("class","js-remove");const g=document.createTextNode("X");l.appendChild(g),i.appendChild(l),u()}}}function y(n){const e=parseInt(n.currentTarget.id),t=o.find(s=>s.mal_id===e);c.findIndex(s=>s.mal_id===e)===-1&&c.push(t),localStorage.setItem("favAnimeSeries",JSON.stringify(c)),r(c,d),u(),r(o,a),m()}const m=()=>{const n=document.querySelectorAll(".js-li");for(const e of n)e.addEventListener("click",y)};function L(){localStorage.removeItem("favAnimeSeries")}_.addEventListener("click",L);function k(){localStorage.removeItem("favAnimeSeries"),c=[],d.innerHTML="",r(o,a),m()}b.addEventListener("click",k);function q(n){const e=parseInt(n.target.parentElement.id),t=c.findIndex(i=>i.mal_id===e);c.splice(t,1),localStorage.setItem("favAnimeSeries",JSON.stringify(c)),r(c,d),u(),r(o,a),m()}const u=()=>{const n=document.querySelectorAll(".js-remove");for(const e of n)e.addEventListener("click",q)},S=localStorage.getItem("favAnimeSeries");S&&(c=JSON.parse(S));r(c,d);u();j.addEventListener("click",n=>{n.preventDefault();for(const e of o)console.log(e.title)});
//# sourceMappingURL=main.js.map
